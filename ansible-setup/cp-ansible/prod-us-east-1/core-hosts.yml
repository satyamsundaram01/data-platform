---
all:
  vars:
    ansible_connection: ssh
    ansible_user: ubuntu
    ansible_become: true
    ansible_ssh_private_key_file: ~/cp-ansible/prod-kafka.pem
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    jmxexporter_enabled: true
    kafka_broker_jmxexporter_port: 7071
    zookeeper_jmxexporter_port: 7071
    confluent_server_enabled: false
    zookeeper_custom_properties:
      tickTime: 2000
      initLimit: 5
      syncLimit: 2
      dataDir: /var/zookeeper
      clientPort: 2181
      admin.serverPort: 8082
      snapCount: 10000
      autopurge.snapRetainCount: 10
      autopurge.purgeInterval: 12
      maxClientCnxns: 100

    kafka_broker_custom_properties:
      zookeeper.connect: zookeeper-core.moeinternal.com:2181/kafka-core
      zookeeper.session.timeout.ms: 30000
      log.dirs: /mnt/data/kafka-data1/topic-data,/mnt/data/kafka-data2/topic-data
      log.retention.hours: 24
      log.roll.hours: 2
      log.segment.bytes: 512000000
      log.roll.jitter.ms: 300000
      log.cleaner.delete.retention.ms: 3600000
      compression.type: zstd
      message.max.bytes: 10485760
      default.replication.factor: 3
      delete.topic.enable: false
      auto.create.topics.enable: false
      num.recovery.threads.per.data.dir: 4
      num.replica.alter.log.dirs.threads: 1
      num.partitions: 10
      offsets.topic.num.partitions: 10
      transaction.state.log.num.partitions: 10
      fetch.max.bytes: 5242880
      replica.fetch.max.bytes: 5242880
      background.threads: 32
      num.network.threads: 32
      num.io.threads: 16
      num.replica.fetchers: 16
      min.insync.replicas: 2
    kafka_broker_service_environment_overrides:
      KAFKA_HEAP_OPTS: "-Xms2g -Xmx6g"
      JMX_PORT: 9000
zookeeper:
  hosts:
    zookeeper-core-1.moeinternal.com:
      zookeeper_id: 1
    zookeeper-core-2.moeinternal.com:
      zookeeper_id: 2
    zookeeper-core-3.moeinternal.com:
      zookeeper_id: 3

kafka_broker:
  hosts:
    172.31.166.102:
      broker_id: 1
    172.31.166.25:
      broker_id: 2
    172.31.167.15:
      broker_id: 3
    172.31.167.236:
      broker_id: 4
    172.31.166.8:
      broker_id: 5
    172.31.164.90:
      broker_id: 6
